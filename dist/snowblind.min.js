var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{Z:()=>d});class n{constructor(e,t={}){if(e._Observer.boundRender=this,this._wasDestroyed=!1,this._renderIsFirstTime=!0,this._maxCopies=e._maxCopies,this._copiesKeptAlive=0,this._lastNode=t.replace||document.body.appendChild(document.createElement("i")),this._Node,this.Object=e,!(e instanceof h.Component))throw new Error("Renderer didn't receive object of type Snowblind.Component")}Render(){if(this._wasDestroyed)throw new Error("Renderer has been destroyed.");if(this.Object._usesTransition){const e=this._Node;this._copiesKeptAlive>=this._maxCopies?e.remove():this.Object.transitionFunction.leave((()=>{e.remove(),this._copiesKeptAlive-=1}))}this.Object.parentElement=this._lastNode.parentNode;var e=this.Object.render();if(!(e instanceof HTMLElement))throw new Error("Can only initialize object with type of HTMLElement.");this._Node=e,this.Object.Node=this._Node;var t=this._Node;const n=document.activeElement,o=n.selectionStart,s=n.selectionEnd;if(this._lastNode.replaceWith(t),n){const e=n.getAttribute("key");if(e){const n=t.querySelector(`[key='${e}']`);n.focus(),n.setSelectionRange(o,s)}}if(this._lastNode=t,this.Object._usesTransition&&(this._copiesKeptAlive++,this.Object.transitionFunction.from((()=>{this._renderIsFirstTime||this.Object.transitionFunction.render()}))),this.Object.hasTheme){const e=document.createElement("div"),n=(e,t)=>{const n=this.Object.hasTheme[t];for(const r of Array.from(e))if("object"==typeof n)for(const e in n)r.style[e]=n[e];else r.style[t]=n};for(const r in this.Object.hasTheme){const o=t.querySelectorAll(r);o&&o.length>0?n(o,r):void 0!==e.style[r]&&n(Array.from(t.getElementsByTagName("*")).concat([t]),r)}}!0===this._renderIsFirstTime?(r(this.Object.didMountCallbacks),this._renderIsFirstTime=!1):r(this.Object.didUpdateCallbacks)}reinitialize(){this._renderIsFirstTime=!0,this.constructor(this.Object)}Destroy(){this._wasDestroyed=!0,r(this.Object.willUnmountCallbacks),this.Object._usesTransition?this.Object.transitionFunction.leave((()=>{this._Node.remove()})):this._Node.remove()}}const r=e=>e.map((e=>e())),o=Symbol("");class s{constructor(e){this.boundRender=!1;const t={get(e,n){if(n===o)return!0;const r=e[n];if(void 0!==r){if(null!==r){var s=r.constructor;r[o]||!s||s!=={}.constructor&&s!==[].constructor||(e[n]=new Proxy(r,t))}return e[n]}},set:(e,t,n)=>(e[t]=n,this.boundRender&&(this.debounce&&window.cancelAnimationFrame(this.debounce),this.debounce=window.requestAnimationFrame((()=>{this.boundRender.Render()}))),!0)};this._value=new Proxy(e,t)}}const i=new Proxy({Number:e=>"number"==typeof e,Integer:e=>"number"==typeof e&&e%1==0,BigInt:e=>"bigint"==typeof e,Float:e=>"number"==typeof e&&e%1!=0,String:e=>"string"==typeof e,Array:e=>Array.isArray(e),Object:e=>"object"==typeof e&&!Array.isArray(e),Symbol:e=>"symbol"==typeof e,Boolean:e=>"boolean"==typeof e,Function:e=>"function"==typeof e,node:e=>["number","string"].indexOf(typeof e)>-1||e instanceof HTMLElement||Array.isArray(e),element:e=>e instanceof HTMLElement,elementType:e=>e instanceof(void 0).Component,instanceOf:function(e){return t=>t instanceof e},typeOf:function(e){return t=>typeof t===e},oneOfType:function(e){return t=>e.map((e=>"function"==typeof e?e(t):this[e](t))).indexOf(!0)>-1},oneOf:function(e){return t=>e.indexOf(t)>-1},arrayOf:function(e){return t=>!!this.Array.isArray(t)&&-1===t.map((n=>{"function"==typeof e?e(t):this[e](t)})).indexOf(!1)},objectOf:function(e){return t=>!!t&&this.arrayOf(e)(Object.values(t))},shape:function(e){return t=>this.exact(e,!0)(t)},exact:function(e,t=!1){return n=>{if(!n||!e)return!1;for(const o in n)if(e.hasOwnProperty(o)){var r=("string"==typeof e[o]?this[e[o]]:e[o])(n[o]);if(!1===r)return r}else if(!t)return!1}},customProp:e=>e,Any:()=>!0},{set:()=>!1,get:function(e,t){if(e.hasOwnProperty(t)){var n=e[t];return n.isRequired=function(n,r){if(void 0===n)throw new Error(`Encountered undefined prop "${r}" as required object.`);return e[t](n)},n.ofLength=function(n){return r=>e[t](r)&&r.length===n},n}throw new Error(`Invalid type for property "${t}" encountered.`)}}),a=function(e,t,n,r){r=Object.assign({returnBool:!1},r),e=Object.assign({},n,e);var o=[];if(void 0!==t)for(const n in t){const a=t[n];var s=("function"==typeof a?a:i[a]||(()=>!1))(e[n],n);if(!1===s){if(r.returnBool)return s;throw new Error(`Invalid type for property "${n}" encountered.`)}o.push(s)}return!(!r.returnBool||-1!==o.indexOf(!1))||e};class c{constructor(e){this.observable=e,this.value=e._value,e.subscribe((e=>{this.value=e}))}valueOf(){return this.value}toString(){return this.value.toString()}}const l={},u=new class{constructor(e){this._value=e,this._subscribers=[]}next(e){this._value=e;for(const t of this._subscribers)t(e)}subscribe(e){this._subscribers.push(e)}complete(){this._subscribers=new Proxy([],{set:()=>{throw new Error("Observable has been completed.")}})}restore(){this._subscribers=[],this._value=void 0}};HTMLElement.prototype.insertAfter=function(e){e&&e.parentNode&&e.parentNode.insertBefore(this,e.nextSibling)},window.expose=function(e,t){e=Array.from([e]).flat(),t=Array.from([t]).flat();for(let r=0;r<e.length;r++){const o=e[r];var n=(void 0===t[r]?o.name:t[r]).toLowerCase();l[n]=o}};const f={Component:class{constructor(e,t,r={}){if(r=Object.assign({replace:!1,hasTheme:!1},r),this.createdReferences={},this.globalSelf=l[this.constructor.name.toLowerCase()],this.globalSelf){const t=this.globalSelf.propTypes;if(t){e=a(e,t,this.globalSelf.defaultProps),this.unexpectedArguments={};for(const n in e){var o=e[n];t.hasOwnProperty(n)||(this.unexpectedArguments[n]=o,delete e[n])}}}this.hasTheme=r.hasTheme,this._watchingObservers=[],this._maxCopies=1/0,this._usesTransition=!1,this.didMountCallbacks=[],this.didUpdateCallbacks=[],this.willUnmountCallbacks=[],r.replace instanceof HTMLElement&&(e.children=Array.from(r.replace.childNodes),this.originalElement=r.replace,this.originalChildren=Array.from(r.replace.childNodes)),this._Observer=new s(e||{}),this.props=this._Observer._value,this.Renderer=new n(this,r),this._generatorFunction=t(e),u.next(this),u.restore();for(const e of this._watchingObservers)e.boundRender=this.Renderer;this.Renderer.Render()}onComponentDidMount(e){this.didMountCallbacks.push(e)}onComponentDidUpdate(e){this.didUpdateCallbacks.push(e)}onComponentWillUnmount(){this.willUnmountCallbacks.push(callback)}render(...e){return this._generatorFunction()}},renderAllIn(e=document.body){const t=e=>{for(const n of e){if(n instanceof HTMLScriptElement)continue;let e=n.nodeName.toLowerCase();if(l.hasOwnProperty(e)){let t=l[e];if("function"==typeof t){const e=this.getNodeProperties(n);new f.Component(e,t,{replace:n})}}else t(Array.from(n.children))}};t(Array.from(e.children))},getNodeProperties:e=>Object.fromEntries(Array.from(e.attributes).map((e=>{var t=e.value,n=e.name;let r;if(r=t.match(/\{\{([A-z0-9_ ]*?)\}\}/)){var o=r[1].trim(),s=typeof window[o];"undefined"!==s&&"function"!==s?t=window[o]:"function"===s&&(t=o+o.endsWith("()")?"":"()")}else if(n.startsWith(":"))t=function(e,...t){function n(e,t,n,r){e.addEventListener(t,(t=>{r&&t.target.isEqualNode(e)?n(e,t):r||n(e,t)}))}function r(e,t){var n=document.createTextNode(t);e.appendChild(n)}const o=/\{\{([0-9]+)\}\}/g;var s="",i=0;for(const t of e)s+=t+(e[e.length-1]===t?"":`{{${i++}}}`);const a=document.createElement("template");if(a.innerHTML=s,a.content.children.length>1)throw new Error("Multiple elements must be wrapped in a single element.");const l=document.createTreeWalker(a.content,1,null);let u,f=0;for(;null!==(u=l.nextNode());){(u instanceof HTMLTextAreaElement||u instanceof HTMLInputElement)&&(u.hasAttribute("key")||(u.setAttribute("key","inputNo"+f),f++));for(const e of Array.from(u.attributes)){var d=e.name,p=e.nodeValue,m=d[0],b=d.substring(1);const r=/\{([@.?!]+)\}/;p=p.replace(o,((e,o)=>{var s=parseInt(o),i=t[s],a="";if("ref"===d&&i.constructor&&"SnowblindRef"===i.constructor.name)return i.current=u,u.isReferenceTo=i,void u.removeAttribute("ref");if("sx"===d){if("string"==typeof i)u.style=i;else if("object"==typeof i)for(const e in i)u.style[e]=i[e];return void u.removeAttribute("sx")}const l=d.match(r);var f=[];const h=e=>{let t=0;for(const n of f)!1!==e(n[0],n[1])?t++:(delete f[t],f=f.filter((e=>e)))},p=(e,t=!0)=>{"!"===e?((e=!1)=>{for(const t in i)e?f.push([t,i[t]]):u.setAttribute(t,i[t])})(t):"."===e?((e=!1)=>{e?h(((e,t)=>{u[e]=t})):u[b]=i})(t):"?"===e?((e=!1)=>{e?h(((e,t)=>{if(t instanceof c&&(t=t.valueOf()),!t)return!1})):(i instanceof c&&(i=i.valueOf()),i&&(u[b]=i))})(t):"@"===e?((e=!1)=>{if(e)h(((e,t)=>(n(u,e,t,!1),!1)));else{var t=!1;"@"===d[1]&&(t=!0,b=b.substring(1)),n(u,b,i,t)}})(t):a=i};if(l)for(const e of l[1])p(e,!0);else p(m,!1);return h(((e,t)=>{u.setAttribute(e,t)})),a})),-1!==["@",".","?","!"].indexOf(m)||d.match(r)?u.removeAttribute(d):"ref"!==d&&u.setAttribute(d,p)}var y=Array.from(u.childNodes);for(const e of y)if(e.nodeType===Node.TEXT_NODE){var v=e.wholeText;const n=Array.from(v.matchAll(o));v=v.replace(o,(e=>" ".repeat(e.length))),n.length>0&&(e.textContent="");var g=0;for(let o=0;o<n.length;o++){const s=n[o];var w=parseInt(s[1]),O=(p=t[w],v.substring(g,s.index));""!==O&&r(u,O);const i=t=>{if(t instanceof HTMLElement||t instanceof SVGElement||t instanceof Text)(n=document.createElement("span")).insertAfter(e),n.replaceWith(t);else if(t instanceof HTMLCollection||t instanceof NodeList){var n;(n=document.createElement("span")).insertAfter(e),n.replaceWith(...t)}else Array.isArray(t)?t.reverse().map((e=>i(e))):t!==Object(t)||t instanceof c?r(u,t):console.error("The value you passed as a variable is not yet supported.")};if(i(p),o==n.length-1){e.remove();var A=v.substring(s.index+s[0].length);""!=A&&r(u,A)}g=s.index+p&&p.length}}}const _=a.content.children[0];return h.renderAllIn(_),_}([t]),n=n.substring(1);else if(t.startsWith("{")&&t.endsWith("}")){var i=t.substring(1,t.length-1);"true"===i||"false"===i?t="true"===i:parseFloat(i)==i&&(t=parseFloat(i))}else t.startsWith("[")&&t.endsWith("]")&&(t=JSON.parse(t.replace(/(?<!\\)'/g,'"')));return[n.startsWith("_")?n.substring(1):n,t]}))),eventBus:{on(e,t){document.addEventListener(e,(e=>t(e.detail)))},dispatch(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove(e,t){document.removeEventListener(e,t)}}};window.addEventListener("load",(()=>{f.renderAllIn()})),HTMLElement.prototype.insertAfter=function(e){e&&e.parentNode&&e.parentNode.insertBefore(this,e.nextSibling)};const h=f,d=h;var p=t.Z;export{p as default};