var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{Z:()=>h});class n{constructor(e,t={}){if(e._Observer.boundRender=this,this._wasDestroyed=!1,this._renderIsFirstTime=!0,this._maxCopies=e._maxCopies,this._copiesKeptAlive=0,this._lastNode=t.replace||document.body.appendChild(document.createElement("i")),this._Node,this.Object=e,!(e instanceof d.Component))throw new Error("Renderer didn't receive object of type Snowblind.Component")}Render(){if(this._wasDestroyed)throw new Error("Renderer has been destroyed.");if(this.Object._usesTransition){const e=this._Node;this._copiesKeptAlive>=this._maxCopies?e.remove():this.Object.transitionFunction.leave((()=>{e.remove(),this._copiesKeptAlive-=1}))}this.Object.parentElement=this._lastNode.parentNode;var e=this.Object.getNode();if(!(e instanceof HTMLElement))throw new Error("Can only initialize object with type of HTMLElement.");this._Node=e,this.Object.Node=this._Node;var t=this._Node;const n=document.activeElement,o=n.selectionStart,s=n.selectionEnd;if(this._lastNode.replaceWith(t),n){const e=n.getAttribute("key");if(e){const n=t.querySelector(`[key='${e}']`);n.focus(),n.setSelectionRange(o,s)}}if(this._lastNode=t,this.Object._usesTransition&&(this._copiesKeptAlive++,this.Object.transitionFunction.from((()=>{this._renderIsFirstTime||this.Object.transitionFunction.render()}))),this.Object.hasTheme){const e=document.createElement("div"),n=(e,t)=>{const n=this.Object.hasTheme[t];for(const r of Array.from(e))if("object"==typeof n)for(const e in n)r.style[e]=n[e];else r.style[t]=n};for(const r in this.Object.hasTheme){const o=t.querySelectorAll(r);o&&o.length>0?n(o,r):void 0!==e.style[r]&&n(Array.from(t.getElementsByTagName("*")).concat([t]),r)}}!0===this._renderIsFirstTime?(r(this.Object.didMountCallbacks),this._renderIsFirstTime=!1):r(this.Object.didUpdateCallbacks)}reinitialize(){this._renderIsFirstTime=!0,this.constructor(this.Object)}Destroy(){this._wasDestroyed=!0,r(this.Object.willUnmountCallbacks),this.Object._usesTransition?this.Object.transitionFunction.leave((()=>{this._Node.remove()})):this._Node.remove()}}const r=e=>e.map((e=>e())),o=Symbol("");class s{constructor(e){this.boundRender=!1;const t={get(e,n){if(n===o)return!0;const r=e[n];if(void 0!==r){if(null!==r){var s=r.constructor;r[o]||!s||s!=={}.constructor&&s!==[].constructor||(e[n]=new Proxy(r,t))}return e[n]}},set:(e,t,n)=>(e[t]=n,this.boundRender&&(this.debounce&&window.cancelAnimationFrame(this.debounce),this.debounce=window.requestAnimationFrame((()=>{this.boundRender.Render()}))),!0)};this._value=new Proxy(e,t)}}const i=new Proxy({Number:e=>"number"==typeof e,Integer:e=>"number"==typeof e&&e%1==0,BigInt:e=>"bigint"==typeof e,Float:e=>"number"==typeof e&&e%1!=0,String:e=>"string"==typeof e,Array:e=>Array.isArray(e),Object:e=>"object"==typeof e&&!Array.isArray(e),Symbol:e=>"symbol"==typeof e,Boolean:e=>"boolean"==typeof e,Function:e=>"function"==typeof e,node:e=>["number","string"].indexOf(typeof e)>-1||e instanceof HTMLElement||Array.isArray(e),element:e=>e instanceof HTMLElement,elementType:e=>e instanceof(void 0).Component,instanceOf:function(e){return t=>t instanceof e},typeOf:function(e){return t=>typeof t===e},oneOfType:function(e){return t=>e.map((e=>"function"==typeof e?e(t):this[e](t))).indexOf(!0)>-1},oneOf:function(e){return t=>e.indexOf(t)>-1},arrayOf:function(e){return t=>!!this.Array.isArray(t)&&-1===t.map((n=>{"function"==typeof e?e(t):this[e](t)})).indexOf(!1)},objectOf:function(e){return t=>!!t&&this.arrayOf(e)(Object.values(t))},shape:function(e){return t=>this.exact(e,!0)(t)},exact:function(e,t=!1){return n=>{if(!n||!e)return!1;for(const o in n)if(e.hasOwnProperty(o)){var r=("string"==typeof e[o]?this[e[o]]:e[o])(n[o]);if(!1===r)return r}else if(!t)return!1}},customProp:e=>e,Any:()=>!0},{set:()=>!1,get:function(e,t){if(e.hasOwnProperty(t)){var n=e[t];return n.isRequired=function(n,r){if(void 0===n)throw new Error(`Encountered undefined prop "${r}" as required object.`);return e[t](n)},n.ofLength=function(n){return r=>e[t](r)&&r.length===n},n}throw new Error(`Invalid type for property "${t}" encountered.`)}}),a=function(e,t,n,r){r=Object.assign({returnBool:!1},r),e=Object.assign({},n,e);var o=[];if(void 0!==t)for(const n in t){const a=t[n];var s=("function"==typeof a?a:i[a]||(()=>!1))(e[n],n);if(!1===s){if(r.returnBool)return s;throw new Error(`Invalid type for property "${n}" encountered.`)}o.push(s)}return!(!r.returnBool||-1!==o.indexOf(!1))||e};class c{constructor(e){this.observable=e,this.value=e._value,e.subscribe((e=>{this.value=e}))}valueOf(){return this.value}toString(){return this.value.toString()}}const l={},u=new class{constructor(e){this._value=e,this._subscribers=[]}next(e){this._value=e;for(const t of this._subscribers)t(e)}subscribe(e){this._subscribers.push(e)}complete(){this._subscribers=new Proxy([],{set:()=>{throw new Error("Observable has been completed.")}})}restore(){this._subscribers=[],this._value=void 0}};HTMLElement.prototype.insertAfter=function(e){e&&e.parentNode&&e.parentNode.insertBefore(this,e.nextSibling)},window.expose=function(e,t){e=Array.from([e]).flat(),t=Array.from([t]).flat();for(let r=0;r<e.length;r++){const o=e[r];var n=(void 0===t[r]?o.name:t[r]).toLowerCase();l[n]=o}};const f={Component:class{constructor(e,t={}){if(t=Object.assign({replace:!1,generator:!1,hasTheme:!1},t),this.createdReferences={},this.globalSelf=l[this.constructor.name.toLowerCase()],this.globalSelf){const t=this.globalSelf.propTypes;if(t){e=a(e,t,this.globalSelf.defaultProps),this.unexpectedArguments={};for(const n in e){var r=e[n];t.hasOwnProperty(n)||(this.unexpectedArguments[n]=r,delete e[n])}}}this.hasTheme=t.hasTheme,this._watchingObservers=[],this._maxCopies=1/0,this._isFunction="function"==typeof t.generator,this._usesTransition=!1,this.didMountCallbacks=[],this.didUpdateCallbacks=[],this.willUnmountCallbacks=[],e.children=Array.from(t.replace.childNodes),this._Observer=new s(e||{}),this.props=this._Observer._value,t.replace instanceof HTMLElement&&(this.originalElement=t.replace,this.originalChildren=Array.from(t.replace.childNodes)),this.Renderer=new n(this,t),this._isFunction&&(this._generatorFunction=t.generator(e),u.next(this),u.restore());for(const e of this._watchingObservers)e.boundRender=this.Renderer;this.__init__(),this.Renderer.Render()}fadeOutDestroy(e=400){var t=performance.now();const n=()=>{var r=performance.now()-t;r>=e?this.destroy():(this.Nodes.map((t=>t[0].style.opacity=1-r/e)),requestAnimationFrame(n))};requestAnimationFrame(n)}onComponentDidMount(e){this.didMountCallbacks.push(e)}onComponentDidUpdate(e){this.didUpdateCallbacks.push(e)}onComponentWillUnmount(){this.willUnmountCallbacks.push(callback)}destroy(){this.Renderer.Destroy();for(const e in this.createdReferences)delete this.createdReferences[e]}__init__(){}getNode(...e){if(this._isFunction)return this._generatorFunction();throw new Error("Could not render, are you sure you created the 'render' method according to our docs? https://continuum-ai.de/doc/snowblind/reference/render-assignment")}},renderAllIn(e=document.body){const t=e=>{for(const n of e){if(n instanceof HTMLScriptElement)continue;let e=n.nodeName.toLowerCase();if(l.hasOwnProperty(e)){let t=l[e];const r="function"==typeof t;if(t&&t.prototype instanceof f.Component||r){const e=f.getNodeProperties(n);r?new f.Component(e,{generator:t,replace:n}):new t(e,{replace:n})}}else t(Array.from(n.children))}};t(Array.from(e.children))},getNodeProperties:e=>Object.fromEntries(Array.from(e.attributes).map((e=>{var t=e.value,n=e.name;let r;if(r=t.match(/\{\{([A-z0-9_ ]*?)\}\}/)){var o=r[1].trim(),s=typeof window[o];"undefined"!==s&&"function"!==s?t=window[o]:"function"===s&&(t=o+o.endsWith("()")?"":"()")}else if(n.startsWith(":"))t=function(e,...t){function n(e,t,n,r){e.addEventListener(t,(t=>{r&&t.target.isEqualNode(e)?n(e,t):r||n(e,t)}))}function r(e,t){var n=document.createTextNode(t);e.appendChild(n)}function o(e,t){return!!e.parentNode&&(e.tagName===t||o(e.parentNode,t))}const s=/\{\{([0-9]+)\}\}/g;var i="",a=0;for(const t of e)i+=t+(e[e.length-1]===t?"":`{{${a++}}}`);const l=document.createElement("template");if(l.innerHTML=i,l.content.children.length>1)throw new Error("Multiple elements must be wrapped in a single element.");const u=document.createTreeWalker(l.content,1,null);let f,h=0;for(;null!==(f=u.nextNode());){(f instanceof HTMLTextAreaElement||f instanceof HTMLInputElement)&&(f.hasAttribute("key")||(f.setAttribute("key","inputNo"+h),h++));for(const e of Array.from(f.attributes)){var p=e.name,m=e.nodeValue,b=p[0],y=p.substring(1);const r=/\{([@.?!]+)\}/;m=m.replace(s,((e,o)=>{var s=parseInt(o),i=t[s],a="";if("ref"===p&&i.constructor&&"SnowblindRef"===i.constructor.name)return i.current=f,f.isReferenceTo=i,void f.removeAttribute("ref");if("sx"===p){if("string"==typeof i)f.style=i;else if("object"==typeof i)for(const e in i)f.style[e]=i[e];return void f.removeAttribute("sx")}const l=p.match(r);var u=[];const d=e=>{let t=0;for(const n of u)!1!==e(n[0],n[1])?t++:(delete u[t],u=u.filter((e=>e)))},h=(e,t=!0)=>{"!"===e?((e=!1)=>{for(const t in i)e?u.push([t,i[t]]):f.setAttribute(t,i[t])})(t):"."===e?((e=!1)=>{e?d(((e,t)=>{f[e]=t})):f[y]=i})(t):"?"===e?((e=!1)=>{e?d(((e,t)=>{if(t instanceof c&&(t=t.valueOf()),!t)return!1})):(i instanceof c&&(i=i.valueOf()),i&&(f[y]=i))})(t):"@"===e?((e=!1)=>{if(e)d(((e,t)=>(n(f,e,t,!1),!1)));else{var t=!1;"@"===p[1]&&(t=!0,y=y.substring(1)),n(f,y,i,t)}})(t):a=i};if(l)for(const e of l[1])h(e,!0);else h(b,!1);return d(((e,t)=>{f.setAttribute(e,t)})),a})),-1!==["@",".","?","!"].indexOf(b)||p.match(r)?f.removeAttribute(p):"ref"!==p&&f.setAttribute(p,m)}var v=Array.from(f.childNodes);for(const e of v)if(e.nodeType===Node.TEXT_NODE){var g=e.wholeText;o(e,"PRE")||(g=g.trim());const n=Array.from(g.matchAll(s));g=g.replace(s,(e=>" ".repeat(e.length))),n.length>0&&(e.textContent="");var w=0;for(let o=0;o<n.length;o++){const s=n[o];var _=parseInt(s[1]),O=(m=t[_],g.substring(w,s.index));""!==O&&r(f,O);const i=t=>{if(t instanceof HTMLElement||t instanceof SVGElement||t instanceof Text)(n=document.createElement("span")).insertAfter(e),n.replaceWith(t);else if(t instanceof HTMLCollection||t instanceof NodeList){var n;(n=document.createElement("span")).insertAfter(e),n.replaceWith(...t)}else Array.isArray(t)?t.reverse().map((e=>i(e))):t!==Object(t)||t instanceof c?r(f,t):console.error("Value might not be supported...")};if(i(m),o==n.length-1){e.remove();var A=g.substring(s.index+s[0].length);""!=A&&r(f,A)}w=s.index+m&&m.length}}}return d.renderAllIn(l.content.children[0]),l.content.children[0]}([t]),n=n.substring(1);else if(t.startsWith("{")&&t.endsWith("}")){var i=t.substring(1,t.length-1);"true"===i||"false"===i?t="true"===i:parseFloat(i)==i&&(t=parseFloat(i))}else t.startsWith("[")&&t.endsWith("]")&&(t=JSON.parse(t.replace(/(?<!\\)'/g,'"')));return[n.startsWith("_")?n.substring(1):n,t]}))),eventBus:{on(e,t){document.addEventListener(e,(e=>t(e.detail)))},dispatch(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove(e,t){document.removeEventListener(e,t)}}};window.addEventListener("load",(()=>{f.renderAllIn()})),HTMLElement.prototype.insertAfter=function(e){e&&e.parentNode&&e.parentNode.insertBefore(this,e.nextSibling)};const d=f,h=d;var p=t.Z;export{p as default};