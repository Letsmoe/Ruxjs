var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{y$:()=>n,s3:()=>s,KS:()=>a,vH:()=>u,bk:()=>f,Ei:()=>c,Zs:()=>d});class n{constructor(e){this.subscriberCount=0,this.value=e,this.subscribers=[]}next(e){this.value=e;for(const t of this.subscribers)t(e)}subscribe(e){this.subscribers.push(e),this.subscriberCount++}complete(){this.subscribers=new Proxy([],{set:()=>{throw new Error("Observable has been closed.")}})}restore(){this.subscribers=[],this.value=void 0}}class s{constructor(){this.current}}const r=new n;class o{constructor(e){this.didUpdateOnce=!1,this.didMountCallbacks=[],this.didUpdateCallbacks=[],this.willUnmountCallbacks=[],this.generator=e,r.next(this),r.restore()}render(){return this.node=this.generator(),this.node}onComponentDidMount(e){this.didMountCallbacks.push(e)}onComponentDidUpdate(e){this.didUpdateCallbacks.push(e)}onComponentWillUnmount(e){this.willUnmountCallbacks.push(e)}didUpdate(){this.didUpdateOnce?this.didUpdateCallbacks.forEach((e=>e(this.node))):(this.didMountCallbacks.forEach((e=>e(this.node))),this.didUpdateOnce=!0)}}function i(e,t){r.next(t),e.appendChild(t.render()),t.didUpdate()}const a={Component:o,Fragment:function(){return document.createDocumentFragment()},make:function(e,t,...r){let a;if(t=t||{},"function"==typeof e)return t.children=r,a=e(t),new o(a);if(a=document.createElement(e),t)for(const[e,r]of Object.entries(t))if("function"==typeof r)a[e.toLowerCase()]=r;else if(r instanceof n)r.subscribe((t=>{a.setAttribute(e,t)})),a.setAttribute(e,r.value);else if(r instanceof s)r.current=a;else if("object"==typeof r)if("style"===e)for(let[e,t]of Object.entries(r))t instanceof n&&t.subscribe((t=>{a.style[e]=t})),null===t?t="none":"number"==typeof t&&(t+="px"),a.style[e]=t;else if("props"===e)for(const[e,t]of Object.entries(r))t instanceof n&&t.subscribe((t=>{a[e]=t})),a[e]=t;else a.setAttribute(e,JSON.stringify(r));else a.setAttribute(e,r.toString());const c=e=>{for(const t of e)if(Array.isArray(t))c(t);else if(t instanceof o)i(a,t),t.didUpdate();else if(t instanceof HTMLElement)a.appendChild(t);else if(t.__proxy instanceof n){let e=document.createTextNode(t);t.__proxy.subscribe((t=>{e.textContent=t})),a.appendChild(e)}else a.appendChild(document.createTextNode(t))};return c(r.flat(1/0)),a},render:i};function c(e){const t=new n(e);let s,o={value:t.value};r.subscribe((e=>{s=e}));const i=new Proxy(o,{get(e,n){if("__proxy"===n)return t;const s=Reflect.get(e,"value"),r=s[n];return"function"==typeof r?r.bind(s):r}});return[i,e=>(t.next(e),o.value=e,console.log(t),"object"==typeof e&&s.node.replaceWith(s.render()),e)]}const l=function e(t,n){if(t===n)return!0;if(!(t instanceof Object&&n instanceof Object))return!1;if(t.constructor!==n.constructor)return!1;for(var s in t)if(t.hasOwnProperty(s)){if(!n.hasOwnProperty(s))return!1;if(t[s]!==n[s]){if("object"!=typeof t[s])return!1;if(!e(t[s],n[s]))return!1}}for(s in n)if(n.hasOwnProperty(s)&&!t.hasOwnProperty(s))return!1;return!0};function u(e,t=[]){var s=t.map((e=>e.valueOf()));const o=r.value,i=n=>{if(s.length>0){let r=!1;for(let e=0;e<s.length;e++)if(!l(s[e],t[e].valueOf())){r=!0;break}r&&(e(n),s=t.map((e=>e.valueOf())))}else e(n)};o.onComponentDidMount(i),o.onComponentDidUpdate(i),t.forEach((e=>{e instanceof n&&e.subscribe(i)}))}function f(){return new s}function d(e){const t=e=>{for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",s=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*s));return t};let n=document.createElement("style");document.head.appendChild(n);let s,r=n.sheet,o="";const i={},a=e=>{for(const n in e){let c=e[n];if(null===c)s.style[n]="none";else if("number"==typeof c)s.style[n]=c+"px";else if("string"==typeof c)s.style[n]=c;else{if(n.indexOf("&")>-1){let e=n.replace(/&/g,o);r.insertRule(`.${e} {}`,0),o=e}else{const e=t(10);r.insertRule(`.${e} {}`,0),o=e,i[n]=e}s=r.cssRules[0],a(c)}}};return a(e),i}var p=t.y$,b=t.s3,h=t.KS,y=t.vH,m=t.bk,C=t.Ei,v=t.Zs;export{p as Observable,b as Reference,h as Snowblind,y as applyChange,m as applyRef,C as applyState,v as applyStyles};