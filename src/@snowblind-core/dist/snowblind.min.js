var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{y$:()=>n,KS:()=>l,tz:()=>r,_0:()=>a,sO:()=>c,eJ:()=>o});class n{constructor(e){this.value=e,this.subscribers=[]}next(e){this.value=e;for(const t of this.subscribers)t(e)}subscribe(e){this.subscribers.push(e)}complete(){this.subscribers=new Proxy([],{set:()=>{throw new Error("Observable has been closed.")}})}restore(){this.subscribers=[],this.value=void 0}valueOf(){return this.value}toString(){return this.value.toString()}}class r{constructor(){this.current}}const s=new n;function o(e){const t=new n(e);return[t,e=>(t.next(e),e)]}const i=function e(t,n){if(t===n)return!0;if(!(t instanceof Object&&n instanceof Object))return!1;if(t.constructor!==n.constructor)return!1;for(var r in t)if(t.hasOwnProperty(r)){if(!n.hasOwnProperty(r))return!1;if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}}for(r in n)if(n.hasOwnProperty(r)&&!t.hasOwnProperty(r))return!1;return!0};function a(e,t=[]){var n=t.map((e=>e.valueOf()));const r=s.value,o=r=>{if(n.length>0){let s=!0;for(let e=0;e<n.length;e++)if(!i(n[e],t[e].valueOf())){s=!1;break}s&&(e(r),n=t.map((e=>e.valueOf())))}else e(r)};r.onComponentDidMount(o),r.onComponentDidUpdate(o)}function c(){return new r}class u{constructor(e,t){this._didUpdateOnce=!1,this.props=e,this.generator=t,this.didMountCallbacks=[],this.didUpdateCallbacks=[],this.willUnmountCallbacks=[],s.next(this),s.restore()}render(){return this.node=this.generator(this.props),this.node}onComponentDidMount(e){this.didMountCallbacks.push(e)}onComponentDidUpdate(e){this.didUpdateCallbacks.push(e)}onComponentWillUnmount(e){this.willUnmountCallbacks.push(e)}didUpdate(){this._didUpdateOnce?this.didUpdateCallbacks.forEach((e=>e(this.node))):(this.didMountCallbacks.forEach((e=>e(this.node))),this._didUpdateOnce=!0)}}function d(e,t){s.next(t),e.appendChild(t.render()),t.didUpdate()}const l={Component:u,Fragment:function(){return document.createDocumentFragment()},make:function(e,t,...s){let o;if("function"==typeof e)return new u(t,e);if(o=document.createElement(e),t)for(const[e,s]of Object.entries(t))if("function"==typeof s){const t=e.replace(/^on/,"").toLowerCase();o.addEventListener(t,s)}else s instanceof n?(s.subscribe((t=>{o.setAttribute(e,t)})),o.setAttribute(e,s.value)):"ref"===e||s instanceof r?s.current=o:o.setAttribute(e,s.toString());for(const e of s.flat(1/0))if(e instanceof u)d(o,e),e.didUpdate();else if(e instanceof HTMLElement)o.appendChild(e);else if(e instanceof n){let t=document.createTextNode(e.value);e.subscribe((e=>{t.textContent=e})),o.appendChild(t)}else o.appendChild(document.createTextNode(e));return o},render:d,eventBus:{on(e,t){document.addEventListener(e,(e=>t(e instanceof CustomEvent?e.detail:void 0)))},dispatch(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove(e,t){document.removeEventListener(e,t)}}};var f=t.y$,h=t.KS,p=t.tz,b=t._0,m=t.sO,v=t.eJ;export{f as Observable,h as Snowblind,p as SnowblindRef,b as onRender,m as useRef,v as useState};